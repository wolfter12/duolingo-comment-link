!function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(n){return e[n]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="duolingo-comment-link/",t(t.s=1)}([function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"c",(function(){return o})),t.d(n,"b",(function(){return r})),t.d(n,"e",(function(){return c})),t.d(n,"f",(function(){return a})),t.d(n,"g",(function(){return u})),t.d(n,"d",(function(){return s}));var i="div.L3O-V",o=".uMmEI",r="uMmEI",c={horizontal:"./icons/link_2_128.png",classic:"./icons/link_1_128.png",copy:"./icons/copy_128.png"},a={small:"20",medium:"30",large:"40"},u={childList:!0,subtree:!0},s={animation:!0,iconName:"classic",iconSize:"20"}},function(e,n,t){"use strict";t.r(n);var i=t(0);function o(e){if(e){var n=document.createElement("div");n.className="comment-link",n.style.fontSize="".concat(i.f[i.d.iconSize],"px");var t=chrome.extension.getURL(i.e[i.d.iconName]),o='<img alt="&#x1F517;" class="link-icon" src='.concat(t,">");n.innerHTML=o,e.insertAdjacentElement("afterBegin",n),e.dataset.commentLinked=!0}}function r(e){return!e.dataset.commentLinked}function c(e){if(!e)return[];var n=[...e.querySelectorAll(i.c)];if(n.length){var t=n.filter(r);if(t.length)return t}return[]}function a(e){if(e.target.classList.contains("link-icon")){var n=(c=e.target,u=document.URL.split("?")[0],(s=[...c.closest(i.c).children].find(e=>e.id).id)&&(a="".concat(u,"?comment_id=").concat(s)),a||u),t=e.target.closest(i.c),o=[...t.children].find(e=>e.id);navigator.clipboard.writeText(n),i.d.animation&&((r=o||t).classList.contains("highlight-comment")||(r.classList.add("highlight-comment"),setTimeout(()=>{r.classList.remove("highlight-comment")},1e3)))}var r,c,a,u,s}chrome.storage.local.get(["animation","iconName","iconSize"],e=>{i.d.animation=e.animation||!0,i.d.iconName=e.iconName||"classic",i.d.iconSize=e.iconSize||"small"});var u=new MutationObserver((function(e){e.forEach(e=>{e.addedNodes.forEach(e=>{"DIV"===e.tagName&&e.classList.contains(i.b)&&r(e)?o(e):e.firstElementChild&&c(e).forEach(o)})})}));function s(){var e;u.disconnect(),document.removeEventListener("click",a),(e=i.a,new Promise(n=>{var t=document.querySelector(e);if(t)n(t);else{var o=new MutationObserver(t=>{t.forEach(t=>{t.addedNodes.forEach(t=>{if(t.matches&&t.matches(e))return o.disconnect(),void n(t);if(t.firstElementChild){var i=t.querySelector(e);i&&(o.disconnect(),n(i))}})})});o.observe(document.documentElement,i.g)}})).then(e=>{c(document).forEach(o),u.observe(e,i.g),document.addEventListener("click",a)})}chrome.runtime.onMessage.addListener(e=>("update"===e.action&&s(),!0)),s()}]);